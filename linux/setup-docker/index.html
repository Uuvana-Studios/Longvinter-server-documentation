<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Uuvana Studios">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Docker Setup - Longvinter Server Docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Docker Setup";
    var mkdocs_page_input_path = "linux/setup-docker.md";
    var mkdocs_page_url = "/linux/setup-docker/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Longvinter Server Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="tocbase current">
    
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../..">Home</a>
  </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Linux Guide</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../setup-vanilla/">Vanilla Setup</a>
  </li>
        
          


  
    
    <li class="navtree toctree-l2 page current">
      <a class="current" href="./">
        Docker Setup
          <span class="toctree-expand"></span>
      </a>
    </li>
    
      



  <li class="toctree-l2 current">
    <ul class="subnav-l2 current">
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#how-to-setup-a-longvinter-server-in-linux">How to setup a Longvinter server in Linux</a>
        </li>
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#requirements-and-prerequisites">Requirements and prerequisites</a>
        </li>
    
      
          

  <li class="toctree-l3">
    <a href="#setting-up-the-container">
      Setting up the container
      <span class="toctree-expand"></span>
    </a>
  </li>



  <li class="toctree-l3">
    <ul class="subnav-l3 toc-hidden">
    
      
        <li class="toctree-l4">
          <a class="toctree-l5" href="#downloading-the-container">Downloading the container</a>
        </li>
    
      
        <li class="toctree-l4">
          <a class="toctree-l5" href="#creating-the-data-directory">Creating the data directory</a>
        </li>
    
      
        <li class="toctree-l4">
          <a class="toctree-l5" href="#configuring-the-server-settings">Configuring the server settings</a>
        </li>
    
      
        <li class="toctree-l4">
          <a class="toctree-l5" href="#changing-the-port-numbers">Changing the port numbers</a>
        </li>
    
    </ul>
  </li>

      
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#starting-the-container">Starting the container</a>
        </li>
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#stopping-the-container">Stopping the container</a>
        </li>
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#updating-the-container">Updating the container</a>
        </li>
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#updating-the-longvinter-server">Updating the Longvinter server</a>
        </li>
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#running-multiple-longvinter-containers-on-one-docker-server">Running multiple Longvinter containers on one Docker server</a>
        </li>
    
      
        <li class="toctree-l3">
          <a class="toctree-l4" href="#portforwarding-and-firewalls">Portforwarding and firewalls</a>
        </li>
    
    </ul>
  </li>


  
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Windows Guide</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../windows/setup-vanilla.md">Vanilla Setup</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../../windows/setup-docker.md">Docker Setup</a>
  </li>
        
      </ul>
    </li>
    
  </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Longvinter Server Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Linux Guide &raquo;</li>
        
      
    
    <li>Docker Setup</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="docker-setup">Docker Setup</h1>
<h2 id="how-to-setup-a-longvinter-server-in-linux">How to setup a Longvinter server in Linux</h2>
<p>If you have any trouble following the guide. Please send us a message in <a href="https://discord.gg/SmPZ8hRqMV">Discord</a> we are more than happy to help you out!</p>
<h2 id="requirements-and-prerequisites">Requirements and prerequisites</h2>
<ul>
<li>Docker</li>
<li>Docker Compose</li>
<li>Git</li>
</ul>
<p>For help installing Docker, go to <a href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository">Install Docker using the Repository</a>
For help installing Docker Compose, go to <a href="https://docs.docker.com/compose/install/">Install Docker Compose</a></p>
<h2 id="setting-up-the-container">Setting up the container</h2>
<h3 id="downloading-the-container">Downloading the container</h3>
<p>Downloading the container can be done by either using git (recommended), or by clicking the green Code button on this page and using the Download ZIP option on the <a href="https://github.com/tvandoorn/longvinter-docker-server">Docker Image Github</a>.
To download the container configuration using git, use the command below
<code>git clone https://github.com/tvandoorn/longvinter-docker-server.git</code></p>
<h3 id="creating-the-data-directory">Creating the data directory</h3>
<p>In order to keep game progress between container restarts a data directory needs to be created. Create this directory in the same directory as the docker-compose.yaml file.
Use the following commands to create the directory and set the appropriate rights.
<code>mkdir data
chown -R 1200:1200 data/</code></p>
<h3 id="configuring-the-server-settings">Configuring the server settings</h3>
<p>The server settings can be changed by opening the <code>docker-compose.yaml</code> file. Settings that may be changed are shown below:</p>
<table>
<thead>
<tr>
<th>Setting name</th>
<th>Used for</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>CFG_SERVER_NAME</td>
<td>Setting the server name that is displayed in the server list.</td>
<td>Unnamed Island</td>
</tr>
<tr>
<td>CFG_MAX_PLAYERS</td>
<td>The maximum amount of players the server will allow at the same time.</td>
<td>32</td>
</tr>
<tr>
<td>CFG_SERVER_MOTD</td>
<td>A Message Of The Day that will be displayed to the player.</td>
<td>Welcome to Longvinter Island!</td>
</tr>
<tr>
<td>CFG_PASSWORD</td>
<td>Use this setting to require a password to join the server.</td>
<td><em>(empty)</em></td>
</tr>
<tr>
<td>CFG_COMMUNITY_WEBSITE</td>
<td>When the server or community has a website, enter it here to display it to the player.</td>
<td>www.longvinter.com</td>
</tr>
<tr>
<td>CFG_ADMIN_STEAM_ID</td>
<td>Add the SteamID64 values for the players that have admin rights to this setting. When there are multiple admins, add the SteamID64 values to this setting separated by a space.</td>
<td><em>(empty)</em></td>
</tr>
<tr>
<td>CFG_ENABLE_PVP</td>
<td>When this setting is set to "true", PvP will be enabled on the server. Set to "false" to disable PvP.</td>
<td>true</td>
</tr>
<tr>
<td>CFG_GAME_PORT</td>
<td>This setting is used to change the game port when multiple servers are running on the same (public) IP address. When changing this setting, make sure to also change the port number under the ports section of the docker-compose.yaml file.</td>
<td>7777</td>
</tr>
<tr>
<td>CFG_QUERY_PORT</td>
<td>This setting is used to change the query port when multiple servers are running on the same (public) IP address. When changing this setting, make sure to also change the port number under the ports section of the docker-compose.yaml file.</td>
<td>27016</td>
</tr>
</tbody>
</table>
<p>With the default values above, the environment part of the <code>docker-compose.yaml</code> file should look like this:</p>
<pre><code class="language-shell">environment:
  CFG_SERVER_NAME: &quot;Unnamed Island&quot;
  CFG_MAX_PLAYERS: &quot;32&quot;
  CFG_SERVER_MOTD: &quot;Welcome to Longvinter Island!&quot;
  CFG_PASSWORD: &quot;&quot;
  CFG_COMMUNITY_WEBSITE: &quot;www.longvinter.com&quot;
  CFG_ADMIN_STEAM_ID: &quot;&quot;
  CFG_ENABLE_PVP: &quot;true&quot;
  CFG_GAME_PORT: &quot;7777&quot;
  CFG_QUERY_PORT: &quot;27016&quot;
</code></pre>
<h3 id="changing-the-port-numbers">Changing the port numbers</h3>
<p>In order to run the server with different port numbers than the default ports <code>7777</code> and <code>27016</code>, the new port numbers have to be edited in two places in the <code>docker-compose.yaml</code> file. </p>
<pre><code class="language-shell">ports:
  - &quot;7777:7777&quot;
  - &quot;27016:27016&quot;
</code></pre>
<pre><code>environment:
  CFG_GAME_PORT: &quot;7777&quot;
  CFG_QUERY_PORT: &quot;27016&quot;
</code></pre>
<p><strong>NOTE: Even though changing the ports is possible, it is currently not supported by the game!</strong></p>
<h2 id="starting-the-container">Starting the container</h2>
<p>When the setup and configuration is done, the container is ready to be started. Open the command line and navigate to the directory (using the <code>cd</code> command) that contains the <code>Dockerfile</code>, <code>docker-compose.yaml</code> and <code>run.sh</code> files.</p>
<p>Start the container using the following command:</p>
<pre><code class="language-shell">docker-compose up -d
</code></pre>
<p>This command will do the following:
1. Build the container image (if not present)
2. Create the container
3. Start the container
4. Run the included startup script (<code>run.sh</code>) inside the container
   1. Clone or update the longvinter-linux-server repository
   2. Create or update the Game.ini file with the settings provided in the <code>docker-compose.yaml</code> file
5. Start the Longvinter server</p>
<h2 id="stopping-the-container">Stopping the container</h2>
<p>To stop the container, run the command below. Note that this removes the container from Docker, but the save data will be saved in the <code>data</code> directory and will be loaded when the server is started again next time.</p>
<pre><code class="language-shell">docker-compose down
</code></pre>
<h2 id="updating-the-container">Updating the container</h2>
<p>When a new version of the container is released, make sure to update the files using <code>git pull</code>, or manually update the files by downloading the code as ZIP from Github. Run the command below to build the new container image and restart the container.</p>
<pre><code class="language-shell">docker-compose up -d --build
</code></pre>
<p>Note that these commands have to be run from the same directory as the <code>Dockerfile</code>, <code>docker-compose.yaml</code> and <code>run.sh</code> files.</p>
<h2 id="updating-the-longvinter-server">Updating the Longvinter server</h2>
<p>Updating the Longvinter server is as easy as restarting the container:</p>
<pre><code class="language-shell">docker-compose restart
</code></pre>
<h2 id="running-multiple-longvinter-containers-on-one-docker-server">Running multiple Longvinter containers on one Docker server</h2>
<p>Running multiple Longvinter containers on one Docker server is very easy. Follow the <em>Setting up the container</em> steps again, but this time set up the server to use a different directory for the new server.</p>
<pre><code class="language-shell">git clone https://github.com/tvandoorn/longvinter-docker-server.git new-name-here
</code></pre>
<p>The command above will download the container files in a directory named <code>new-name-here</code>. Make sure to change the server ports using the <em>Changing the port numbers</em> step.</p>
<p><strong>NOTE: Even though changing the ports is possible, it is currently not supported by the game!</strong></p>
<h2 id="portforwarding-and-firewalls">Portforwarding and firewalls</h2>
<p>When running the container it might be necessary to do port forwarding or open ports in your firewall. For port forwarding instructions, please refer to the information/documentation provided by your ISP or router/modem manufacturer. For opening ports in your software firewall use the <code>Windows Firewall with Advanced Security</code> tool for Windows systems. For Linux based systems you can use the ufw or iptables tools. Please refer to their official documentation for instructions.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../setup-vanilla/" class="btn btn-neutral" title="Vanilla Setup"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2021 <a href="https://github.com/Uuvana-Studios">Uuvana Studios</a>.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/Uuvana-Studios/Longvinter-server-documentation" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../setup-vanilla/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
